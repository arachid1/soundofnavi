Category:  coch
Dataset:  all_sw_coch_preprocessed_v2_param_v29_augm_v0_cleaned_8000.pkl
File:  conv.train2198
Description:  lstm_att
2021-06-07 03:48:46.400755: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0
WARNING:tensorflow:From /home/alirachidi/classification_algorithm/trainers/main/models/conv/modules/augmentation.py:19: experimental_run_functions_eagerly (from tensorflow.python.eager.def_function) is deprecated and will be removed in a future version.
Instructions for updating:
Use `tf.config.run_functions_eagerly` instead of the experimental version.
2021-06-07 03:48:49.867504: I tensorflow/compiler/jit/xla_cpu_device.cc:41] Not creating XLA devices, tf_xla_enable_xla_devices not set
2021-06-07 03:48:49.869591: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcuda.so.1
2021-06-07 03:48:49.885921: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:48:49.886699: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1720] Found device 0 with properties: 
pciBusID: 0000:00:05.0 name: Tesla T4 computeCapability: 7.5
coreClock: 1.59GHz coreCount: 40 deviceMemorySize: 14.75GiB deviceMemoryBandwidth: 298.08GiB/s
2021-06-07 03:48:49.886747: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0
2021-06-07 03:48:49.891102: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.11
2021-06-07 03:48:49.891249: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.11
2021-06-07 03:48:49.892838: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcufft.so.10
2021-06-07 03:48:49.893226: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcurand.so.10
2021-06-07 03:48:49.894731: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusolver.so.10
2021-06-07 03:48:49.895948: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusparse.so.11
2021-06-07 03:48:49.896148: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.8
2021-06-07 03:48:49.896320: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:48:49.897358: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:48:49.898298: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1862] Adding visible gpu devices: 0
Tensorflow Version: 2.4.0
Num GPUs Available:  1
-----------------------
Using module: nv/train2198.py
Using train_file: ../../data/datasets/all_sw_coch_preprocessed_v2_param_v29_augm_v0_cleaned_8000.pkl
Job directory: ../../new_cache/conv__2198__06_0348__v29__lstm_att
Parameters: {'N_CLASSES': 1, 'SR': 8000, 'BATCH_SIZE': 20, 'LR': 0.001, 'SHAPE': [128, 1250], 'LL2_REG': 0, 'WEIGHT_DECAY': 0.001, 'N_EPOCHS': 80, 'FACTOR': 0.25, 'PATIENCE': 8, 'MIN_LR': 1e-07, 'LABEL_SMOOTHING': 0, 'EPSILON': 1e-07, 'ES_PATIENCE': 35, 'OVERSAMPLE': 0, 'MIN_DELTA': 0, 'PARAM': 'v29', 'EPOCH_START': 1, 'CLAUSE': 1, 'AUGMENTATION': 0, 'TARGET': 1, 'INITIAL_CHANNELS': 1, 'CLASS_WEIGHTS': 1, 'SIX': 0, 'CONCAT': 0, 'TESTING': 0}
Augmentation parameters for audio: {'ADD': 1, 'QUANTITY': 250, 'WAV_PATH': 'v36,v37'}
Augmentation parameters for spectrograms: {'ADD': 1, 'QUANTITY': 150, 'TIME_MASKING': 1, 'FREQUENCY_MASKING': 1, 'LOUDNESS': 0}
-----------------------
Collecting Variables...
All variables have been collected.
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow_addons/utils/ensure_tf_install.py:68: UserWarning: Tensorflow Addons supports using Python ops for all Tensorflow versions above or equal to 2.2.0 and strictly below 2.3.0 (nightly versions are not supported). 
 The versions of TensorFlow you are currently using is 2.4.0 and is not supported. 
Some things might work, some things might not.
If you were to encounter a bug, do not file an issue.
If you want to make sure you're using a tested and supported configuration, either change the TensorFlow version or the TensorFlow Addons's version. 
You can find the compatibility matrix in TensorFlow Addon's readme:
https://github.com/tensorflow/addons
  UserWarning,
wandb: W&B syncing is set to `offline` in this directory.  Run `wandb online` or set WANDB_MODE=online to enable cloud syncing.
2021-06-07 03:49:41.739187: I tensorflow/compiler/jit/xla_gpu_device.cc:99] Not creating XLA devices, tf_xla_enable_xla_devices not set
2021-06-07 03:49:41.739533: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:49:41.740301: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1720] Found device 0 with properties: 
pciBusID: 0000:00:05.0 name: Tesla T4 computeCapability: 7.5
coreClock: 1.59GHz coreCount: 40 deviceMemorySize: 14.75GiB deviceMemoryBandwidth: 298.08GiB/s
2021-06-07 03:49:41.740359: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0
2021-06-07 03:49:41.740435: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.11
2021-06-07 03:49:41.740466: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.11
2021-06-07 03:49:41.740495: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcufft.so.10
2021-06-07 03:49:41.740527: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcurand.so.10
2021-06-07 03:49:41.740556: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusolver.so.10
2021-06-07 03:49:41.740582: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcusparse.so.11
2021-06-07 03:49:41.740608: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.8
2021-06-07 03:49:41.740714: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:49:41.741447: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:49:41.742175: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1862] Adding visible gpu devices: 0
2021-06-07 03:49:41.742242: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudart.so.11.0
2021-06-07 03:49:42.616532: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1261] Device interconnect StreamExecutor with strength 1 edge matrix:
2021-06-07 03:49:42.616591: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1267]      0 
2021-06-07 03:49:42.616609: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1280] 0:   N 
2021-06-07 03:49:42.616975: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:49:42.618161: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:49:42.619297: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:941] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero
2021-06-07 03:49:42.620292: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1406] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 13968 MB memory) -> physical GPU (device: 0, name: Tesla T4, pci bus id: 0000:00:05.0, compute capability: 7.5)
2021-06-07 03:49:44.407837: I tensorflow/compiler/mlir/mlir_graph_optimization_pass.cc:116] None of the MLIR optimization passes are enabled (registered 2)
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
2021-06-07 03:49:44.410494: I tensorflow/core/platform/profile_utils/cpu_utils.cc:112] CPU Frequency: 2299995000 Hz
2021-06-07 03:49:44.881638: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcudnn.so.8
2021-06-07 03:49:47.167334: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublas.so.11
2021-06-07 03:49:47.699723: I tensorflow/stream_executor/platform/default/dso_loader.cc:49] Successfully opened dynamic library libcublasLt.so.11
Original number of folders: 453
Pneumonia patients: 109, Non-pneumonia patients: 270
-----------------------
Number of train recordings: 4212 with pneumonia: 1080 and non-pneumonia: 3132
Number of val recordings: 1072 with pneumonia: 288 and non-pneumonia: 784
-----------------------
The initial learning rate for this job is: 0.001
With concat = False and six = False, size of training set: 4212...
...and size of validation set: 1072
Initializing weights...
weights = {0: 0.6724137931034483, 1: 1.95}
Model: "conv2d"
____________________________________________________________________________________________________________________________________________
Layer (type)                                  Output Shape                   Param #         Connected to                                   
============================================================================================================================================
input_1 (InputLayer)                          [(None, 5, 250, 128, 1)]       0                                                              
____________________________________________________________________________________________________________________________________________
batch_normalization (BatchNormalization)      (None, 5, 250, 128, 1)         4               input_1[0][0]                                  
____________________________________________________________________________________________________________________________________________
time_distributed (TimeDistributed)            (None, 5, 250, 128, 16)        32              batch_normalization[0][0]                      
____________________________________________________________________________________________________________________________________________
time_distributed_2 (TimeDistributed)          (None, 5, 250, 128, 16)        32              batch_normalization[0][0]                      
____________________________________________________________________________________________________________________________________________
time_distributed_4 (TimeDistributed)          (None, 5, 250, 128, 1)         0               batch_normalization[0][0]                      
____________________________________________________________________________________________________________________________________________
time_distributed_1 (TimeDistributed)          (None, 5, 250, 128, 16)        2320            time_distributed[0][0]                         
____________________________________________________________________________________________________________________________________________
time_distributed_3 (TimeDistributed)          (None, 5, 250, 128, 16)        6416            time_distributed_2[0][0]                       
____________________________________________________________________________________________________________________________________________
time_distributed_5 (TimeDistributed)          (None, 5, 250, 128, 16)        32              time_distributed_4[0][0]                       
____________________________________________________________________________________________________________________________________________
concatenate (Concatenate)                     (None, 5, 250, 128, 48)        0               time_distributed_1[0][0]                       
                                                                                             time_distributed_3[0][0]                       
                                                                                             time_distributed_5[0][0]                       
____________________________________________________________________________________________________________________________________________
time_distributed_6 (TimeDistributed)          (None, 5, 125, 64, 48)         0               concatenate[0][0]                              
____________________________________________________________________________________________________________________________________________
batch_normalization_1 (BatchNormalization)    (None, 5, 125, 64, 48)         192             time_distributed_6[0][0]                       
____________________________________________________________________________________________________________________________________________
dropout (Dropout)                             (None, 5, 125, 64, 48)         0               batch_normalization_1[0][0]                    
____________________________________________________________________________________________________________________________________________
time_distributed_7 (TimeDistributed)          (None, 5, 48)                  0               dropout[0][0]                                  
____________________________________________________________________________________________________________________________________________
bidirectional (Bidirectional)                 (None, 5, 256)                 181248          time_distributed_7[0][0]                       
____________________________________________________________________________________________________________________________________________
bidirectional_1 (Bidirectional)               (None, 5, 256)                 394240          bidirectional[0][0]                            
____________________________________________________________________________________________________________________________________________
dense (Dense)                                 (None, 5, 128)                 32896           bidirectional_1[0][0]                          
____________________________________________________________________________________________________________________________________________
dense_1 (Dense)                               (None, 5, 1)                   129             dense[0][0]                                    
____________________________________________________________________________________________________________________________________________
flatten (Flatten)                             (None, 5)                      0               dense_1[0][0]                                  
____________________________________________________________________________________________________________________________________________
dense_2 (Dense)                               (None, 1)                      6               flatten[0][0]                                  
============================================================================================================================================
Total params: 617,547
Trainable params: 617,449
Non-trainable params: 98
____________________________________________________________________________________________________________________________________________
Epoch 1/80
211/211 - 99s - loss: 0.6934 - accuracy: 0.4651 - val_loss: 0.7055 - val_accuracy: 0.3647
Confusion matrix: 
 [[191 593]
 [ 88 200]]
Normalized Confusion matrix: 
 [[0.24362245 0.75637755]
 [0.30555556 0.69444444]]
Validation f1: 37.00
Validation accuracy: 36.47
Validation recall: 69.44
Validation precision: 25.22
Validation AUC: 0.2665065906750464
Validation class accuracies: [0.24362244897959184, 0.6944444444444444]
The clause is activated.
Not defaulting.
Lr has been adjusted to 0.0002500000118743628
Saving model...
Epoch 2/80
211/211 - 97s - loss: 0.6885 - accuracy: 0.5356 - val_loss: 0.6699 - val_accuracy: 0.6315
Confusion matrix: 
 [[581 203]
 [192  96]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.74107143 0.25892857]
 [0.66666667 0.33333333]]
Validation f1: 32.71
Validation accuracy: 63.15
Validation recall: 33.33
Validation precision: 32.11
Validation AUC: 0.3208046653091643
Validation class accuracies: [0.7410714285714286, 0.3333333333333333]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3700277520814061 hasn't increased by 0 in 1 epochs
Epoch 3/80
211/211 - 95s - loss: 0.6850 - accuracy: 0.5620 - val_loss: 0.6634 - val_accuracy: 0.6371
Confusion matrix: 
 [[567 217]
 [172 116]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.72321429 0.27678571]
 [0.59722222 0.40277778]]
Validation f1: 37.36
Validation accuracy: 63.71
Validation recall: 40.28
Validation precision: 34.83
Validation AUC: 0.33332510485072375
Validation class accuracies: [0.7232142857142857, 0.4027777777777778]
The clause is activated.
Not defaulting.
Lr has been adjusted to 6.25000029685907e-05
Saving model...
Epoch 4/80
211/211 - 102s - loss: 0.6840 - accuracy: 0.5522 - val_loss: 0.6670 - val_accuracy: 0.6231
Confusion matrix: 
 [[544 240]
 [164 124]]
Normalized Confusion matrix: 
 [[0.69387755 0.30612245]
 [0.56944444 0.43055556]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 38.04
Validation accuracy: 62.31
Validation recall: 43.06
Validation precision: 34.07
Validation AUC: 0.3405835308949344
Validation class accuracies: [0.6938775510204082, 0.4305555555555556]
The clause is activated.
Not defaulting.
Lr has been adjusted to 1.5625000742147677e-05
Saving model...
Epoch 5/80
211/211 - 93s - loss: 0.6841 - accuracy: 0.5515 - val_loss: 0.6685 - val_accuracy: 0.6129
Confusion matrix: 
 [[528 256]
 [159 129]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.67346939 0.32653061]
 [0.55208333 0.44791667]]
Validation f1: 38.34
Validation accuracy: 61.29
Validation recall: 44.79
Validation precision: 33.51
Validation AUC: 0.34137320520770875
Validation class accuracies: [0.673469387755102, 0.4479166666666667]
The clause is activated.
Not defaulting.
Lr has been adjusted to 3.906250185536919e-06
Saving model...
Epoch 6/80
211/211 - 92s - loss: 0.6836 - accuracy: 0.5537 - val_loss: 0.6685 - val_accuracy: 0.6119
Confusion matrix: 
 [[528 256]
 [160 128]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.67346939 0.32653061]
 [0.55555556 0.44444444]]
Validation f1: 38.10
Validation accuracy: 61.19
Validation recall: 44.44
Validation precision: 33.33
Validation AUC: 0.3417537476464389
Validation class accuracies: [0.673469387755102, 0.4444444444444444]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.38335809806835064 hasn't increased by 0 in 1 epochs
Epoch 7/80
211/211 - 90s - loss: 0.6826 - accuracy: 0.5598 - val_loss: 0.6678 - val_accuracy: 0.6138
Confusion matrix: 
 [[531 253]
 [161 127]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.67729592 0.32270408]
 [0.55902778 0.44097222]]
Validation f1: 38.02
Validation accuracy: 61.38
Validation recall: 44.10
Validation precision: 33.42
Validation AUC: 0.3416026804504122
Validation class accuracies: [0.6772959183673469, 0.4409722222222222]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.38335809806835064 hasn't increased by 0 in 2 epochs
Epoch 8/80
211/211 - 93s - loss: 0.6834 - accuracy: 0.5589 - val_loss: 0.6680 - val_accuracy: 0.6119
Confusion matrix: 
 [[529 255]
 [161 127]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.6747449  0.3252551 ]
 [0.55902778 0.44097222]]
Validation f1: 37.91
Validation accuracy: 61.19
Validation recall: 44.10
Validation precision: 33.25
Validation AUC: 0.34162135421256634
Validation class accuracies: [0.6747448979591837, 0.4409722222222222]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.38335809806835064 hasn't increased by 0 in 3 epochs
Epoch 9/80
211/211 - 90s - loss: 0.6820 - accuracy: 0.5627 - val_loss: 0.6688 - val_accuracy: 0.6119
Confusion matrix: 
 [[526 258]
 [158 130]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.67091837 0.32908163]
 [0.54861111 0.45138889]]
Validation f1: 38.46
Validation accuracy: 61.19
Validation recall: 45.14
Validation precision: 33.51
Validation AUC: 0.3416532540499664
Validation class accuracies: [0.6709183673469388, 0.4513888888888889]
The clause is activated.
Not defaulting.
Lr has been adjusted to 9.765625463842298e-07
Saving model...
Epoch 10/80
211/211 - 89s - loss: 0.6834 - accuracy: 0.5537 - val_loss: 0.6683 - val_accuracy: 0.6110
Confusion matrix: 
 [[530 254]
 [163 125]]
Normalized Confusion matrix: 
 [[0.67602041 0.32397959]
 [0.56597222 0.43402778]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 37.48
Validation accuracy: 61.10
Validation recall: 43.40
Validation precision: 32.98
Validation AUC: 0.341550691067448
Validation class accuracies: [0.6760204081632653, 0.4340277777777778]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 1 epochs
Epoch 11/80
211/211 - 89s - loss: 0.6839 - accuracy: 0.5496 - val_loss: 0.6689 - val_accuracy: 0.6110
Confusion matrix: 
 [[528 256]
 [161 127]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.67346939 0.32653061]
 [0.55902778 0.44097222]]
Validation f1: 37.85
Validation accuracy: 61.10
Validation recall: 44.10
Validation precision: 33.16
Validation AUC: 0.34196475451301767
Validation class accuracies: [0.673469387755102, 0.4409722222222222]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 2 epochs
Epoch 12/80
211/211 - 93s - loss: 0.6830 - accuracy: 0.5494 - val_loss: 0.6688 - val_accuracy: 0.6119
Confusion matrix: 
 [[526 258]
 [158 130]]
Normalized Confusion matrix: 
 [[0.67091837 0.32908163]
 [0.54861111 0.45138889]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 38.46
Validation accuracy: 61.19
Validation recall: 45.14
Validation precision: 33.51
Validation AUC: 0.34167749402059017
Validation class accuracies: [0.6709183673469388, 0.4513888888888889]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 3 epochs
Epoch 13/80
211/211 - 100s - loss: 0.6832 - accuracy: 0.5553 - val_loss: 0.6691 - val_accuracy: 0.6073
Confusion matrix: 
 [[523 261]
 [160 128]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.66709184 0.33290816]
 [0.55555556 0.44444444]]
Validation f1: 37.81
Validation accuracy: 60.73
Validation recall: 44.44
Validation precision: 32.90
Validation AUC: 0.3423362608020196
Validation class accuracies: [0.6670918367346939, 0.4444444444444444]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 4 epochs
Epoch 14/80
211/211 - 89s - loss: 0.6833 - accuracy: 0.5529 - val_loss: 0.6687 - val_accuracy: 0.6101
Confusion matrix: 
 [[526 258]
 [160 128]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.67091837 0.32908163]
 [0.55555556 0.44444444]]
Validation f1: 37.98
Validation accuracy: 61.01
Validation recall: 44.44
Validation precision: 33.16
Validation AUC: 0.34176647890127987
Validation class accuracies: [0.6709183673469388, 0.4444444444444444]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 5 epochs
Epoch 15/80
211/211 - 89s - loss: 0.6831 - accuracy: 0.5563 - val_loss: 0.6690 - val_accuracy: 0.6101
Confusion matrix: 
 [[526 258]
 [160 128]]
Normalized Confusion matrix: 
 [[0.67091837 0.32908163]
 [0.55555556 0.44444444]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 37.98
Validation accuracy: 61.01
Validation recall: 44.44
Validation precision: 33.16
Validation AUC: 0.341843992252674
Validation class accuracies: [0.6709183673469388, 0.4444444444444444]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 6 epochs
Epoch 16/80
211/211 - 89s - loss: 0.6825 - accuracy: 0.5591 - val_loss: 0.6684 - val_accuracy: 0.6110
Confusion matrix: 
 [[529 255]
 [162 126]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.6747449 0.3252551]
 [0.5625    0.4375   ]]
Validation f1: 37.67
Validation accuracy: 61.10
Validation recall: 43.75
Validation precision: 33.07
Validation AUC: 0.3415458095651362
Validation class accuracies: [0.6747448979591837, 0.4375]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 7 epochs
Epoch 17/80
211/211 - 99s - loss: 0.6835 - accuracy: 0.5575 - val_loss: 0.6689 - val_accuracy: 0.6110
Confusion matrix: 
 [[528 256]
 [161 127]]
Normalized Confusion matrix: 
 [[0.67346939 0.32653061]
 [0.55902778 0.44097222]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 37.85
Validation accuracy: 61.10
Validation recall: 44.10
Validation precision: 33.16
Validation AUC: 0.3417168569960559
Validation class accuracies: [0.673469387755102, 0.4409722222222222]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 8 epochs
Lr has been adjusted to 2.4414063659605745e-07
Epoch 18/80
211/211 - 90s - loss: 0.6826 - accuracy: 0.5565 - val_loss: 0.6680 - val_accuracy: 0.6110
Confusion matrix: 
 [[530 254]
 [163 125]]
Normalized Confusion matrix: 
 [[0.67602041 0.32397959]
 [0.56597222 0.43402778]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 37.48
Validation accuracy: 61.10
Validation recall: 43.40
Validation precision: 32.98
Validation AUC: 0.34168100775788224
Validation class accuracies: [0.6760204081632653, 0.4340277777777778]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 9 epochs
Epoch 19/80
211/211 - 89s - loss: 0.6822 - accuracy: 0.5558 - val_loss: 0.6677 - val_accuracy: 0.6110
Confusion matrix: 
 [[530 254]
 [163 125]]
Normalized Confusion matrix: 
 [[0.67602041 0.32397959]
 [0.56597222 0.43402778]]
Validation f1: 37.48
Validation accuracy: 61.10
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation recall: 43.40
Validation precision: 32.98
Validation AUC: 0.3417101742566404
Validation class accuracies: [0.6760204081632653, 0.4340277777777778]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 10 epochs
Epoch 20/80
211/211 - 90s - loss: 0.6829 - accuracy: 0.5565 - val_loss: 0.6687 - val_accuracy: 0.6101
Confusion matrix: 
 [[527 257]
 [161 127]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.67219388 0.32780612]
 [0.55902778 0.44097222]]
Validation f1: 37.80
Validation accuracy: 61.01
Validation recall: 44.10
Validation precision: 33.07
Validation AUC: 0.3416061116908574
Validation class accuracies: [0.6721938775510204, 0.4409722222222222]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 11 epochs
Epoch 21/80
211/211 - 99s - loss: 0.6832 - accuracy: 0.5501 - val_loss: 0.6687 - val_accuracy: 0.6091
Confusion matrix: 
 [[525 259]
 [160 128]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.66964286 0.33035714]
 [0.55555556 0.44444444]]
Validation f1: 37.93
Validation accuracy: 60.91
Validation recall: 44.44
Validation precision: 33.07
Validation AUC: 0.34129606789373684
Validation class accuracies: [0.6696428571428571, 0.4444444444444444]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 12 epochs
Epoch 22/80
211/211 - 84s - loss: 0.6837 - accuracy: 0.5541 - val_loss: 0.6680 - val_accuracy: 0.6110
Confusion matrix: 
 [[530 254]
 [163 125]]
Normalized Confusion matrix: 
 [[0.67602041 0.32397959]
 [0.56597222 0.43402778]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 37.48
Validation accuracy: 61.10
Validation recall: 43.40
Validation precision: 32.98
Validation AUC: 0.3416915709863028
Validation class accuracies: [0.6760204081632653, 0.4340277777777778]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 13 epochs
Epoch 23/80
211/211 - 80s - loss: 0.6825 - accuracy: 0.5546 - val_loss: 0.6686 - val_accuracy: 0.6101
Confusion matrix: 
 [[527 257]
 [161 127]]
Normalized Confusion matrix: 
 [[0.67219388 0.32780612]
 [0.55902778 0.44097222]]
Validation f1: 37.80
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation accuracy: 61.01
Validation recall: 44.10
Validation precision: 33.07
Validation AUC: 0.3415123866389371
Validation class accuracies: [0.6721938775510204, 0.4409722222222222]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 14 epochs
Epoch 24/80
211/211 - 80s - loss: 0.6833 - accuracy: 0.5620 - val_loss: 0.6691 - val_accuracy: 0.6082
Confusion matrix: 
 [[524 260]
 [160 128]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.66836735 0.33163265]
 [0.55555556 0.44444444]]
Validation f1: 37.87
Validation accuracy: 60.82
Validation recall: 44.44
Validation precision: 32.99
Validation AUC: 0.341733288199088
Validation class accuracies: [0.6683673469387755, 0.4444444444444444]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 15 epochs
Epoch 25/80
211/211 - 80s - loss: 0.6831 - accuracy: 0.5527 - val_loss: 0.6682 - val_accuracy: 0.6110
Confusion matrix: 
 [[530 254]
 [163 125]]
Normalized Confusion matrix: 
 [[0.67602041 0.32397959]
 [0.56597222 0.43402778]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 37.48
Validation accuracy: 61.10
Validation recall: 43.40
Validation precision: 32.98
Validation AUC: 0.34154612371345283
Validation class accuracies: [0.6760204081632653, 0.4340277777777778]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 16 epochs
Lr has been adjusted to 6.103515914901436e-08
Epoch 26/80
211/211 - 88s - loss: 0.6825 - accuracy: 0.5560 - val_loss: 0.6680 - val_accuracy: 0.6110
Confusion matrix: 
 [[530 254]
 [163 125]]
Normalized Confusion matrix: 
 [[0.67602041 0.32397959]
 [0.56597222 0.43402778]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 37.48
Validation accuracy: 61.10
Validation recall: 43.40
Validation precision: 32.98
Validation AUC: 0.3416720464209324
Validation class accuracies: [0.6760204081632653, 0.4340277777777778]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 17 epochs
Epoch 27/80
211/211 - 87s - loss: 0.6827 - accuracy: 0.5589 - val_loss: 0.6695 - val_accuracy: 0.6063
Confusion matrix: 
 [[521 263]
 [159 129]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Normalized Confusion matrix: 
 [[0.66454082 0.33545918]
 [0.55208333 0.44791667]]
Validation f1: 37.94
Validation accuracy: 60.63
Validation recall: 44.79
Validation precision: 32.91
Validation AUC: 0.34213623889980793
Validation class accuracies: [0.6645408163265306, 0.4479166666666667]
The clause is activated.
Not defaulting.
The validation tracker metric at 0.3846153846153846 hasn't increased by 0 in 18 epochs
Epoch 28/80
211/211 - 90s - loss: 0.6829 - accuracy: 0.5558 - val_loss: 0.6684 - val_accuracy: 0.6110
Confusion matrix: 
 [[528 256]
 [161 127]]
Normalized Confusion matrix: 
 [[0.67346939 0.32653061]
 [0.55902778 0.44097222]]
/home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/site-packages/tensorflow/python/data/ops/dataset_ops.py:3504: UserWarning: Even though the tf.config.experimental_run_functions_eagerly option is set, this option does not apply to tf.data functions. tf.data functions are still traced and executed as graphs.
  "Even though the tf.config.experimental_run_functions_eagerly "
Validation f1: 37.85
Validation accuracy: 61.10
Validation recall: 44.10
Validation precision: 33.16
Validation AUC: 0.34129446278566344
Validation class accuracies: [0.673469387755102, 0.4409722222222222]
local_gc_exec.sh: line 6: 21730 Killed                  python -m models.$MODULE_NAME --train-file $LOCAL_TRAIN_FILE --job-dir $LOCAL_JOB_DIR --params "$PARAMS" --wav-params "$WAV_PARAMS" --spec-params "$SPEC_PARAMS"

 See logs at ../../new_cache/conv__2198__06_0348__v29__lstm_att/logs//home/alirachidi/anaconda3/envs/LungSoundClass/lib/python3.7/multiprocessing/semaphore_tracker.py:144: UserWarning: semaphore_tracker: There appear to be 6 leaked semaphores to clean up at shutdown
  len(cache))
